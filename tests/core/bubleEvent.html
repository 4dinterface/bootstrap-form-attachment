<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>ArrayCollection Testing</title>
        <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.11.0.css">
        <script src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>  
        
        <script src="../../client/core/Class.js"></script>       
        <script src="../../client/core/Component.js"></script>       
        
    </head>
    <body>
        <script src="../../client/core/data/ObjectCollection.js"></script>            
        <script src="../../client/core/data/ArrayCollection.js"></script>            
        <script src="../../client/core/data/Model.js"></script>            
        
        <script src="../../client/model/Keyframe.js"></script>            
        <script src="../../client/model/KeyframeCollection.js"></script>            
        
        <script src="../../client/model/Property.js"></script>            
        <script src="../../client/model/PropertyCollection.js"></script>                    
        
        <script src="../../client/model/Shape.js"></script>            
        <script src="../../client/model/ShapeCollection.js"></script> 
        
        <script src="../../client/model/Composition.js"></script>                    

        <div id="qunit"></div>
        <div id="qunit-fixture"></div>                        
        
              
        <script>           
              test( "test length", function() { 
                  //stop();                  
                  var key=new app.model.Keyframe(),                      
                      property= new app.model.Property,                                            
                      shape=new app.model.Shape(),                                                                                
                      composition=new app.model.Composition();
                                    
                                    
                  composition.get('shapeCollection').push(shape);                  
                  shape.get('propertyCollection').set('test',property);
                  property.get('keyframeCollection').set('100',key);
                  
                  
                  
                  // изменение кейфрейма                  
                  composition.on('keyframechange',function(e){
                      ok( 3==3, e.eventName );
                  })    
                  
                  
                  // изменение в коллекции кейфреймов
                  composition.on('keyframecollectionchange',function(e){
                      ok( 3==3, e.eventName );
                  })    

    
                  // изменение в составе свойств shape
                  composition.on('propertycollectionchange',function(e){
                      ok( 3==3, e.eventName );
                  })    
    
    
    
                  //тест на изменение ключа                  
                  key.set("easing","none");                                      
                  // тест на изменение коллекции ключей
                  property.get('keyframeCollection').set("200",key);      
                  
                  // тест на изменение местоположения ключа
                  property.get('keyframeCollection').moveKeyframe(200,210);      

                  //тест на изменение состава свойств
                  shape.get('propertyCollection').set("opacity",property);
                  
              });              
              
        </script>
    </body>
    
</html>
